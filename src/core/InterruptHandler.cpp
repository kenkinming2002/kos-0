#include <core/InterruptHandler.hpp>

#define WEAK __attribute__((weak))
#define INTERRUPT_HANDLER_STUB(i) \
  extern "C" WEAK void interrupt_handler_##i() {}

INTERRUPT_HANDLER_STUB(0)
INTERRUPT_HANDLER_STUB(1)
INTERRUPT_HANDLER_STUB(2)
INTERRUPT_HANDLER_STUB(3)
INTERRUPT_HANDLER_STUB(4)
INTERRUPT_HANDLER_STUB(5)
INTERRUPT_HANDLER_STUB(6)
INTERRUPT_HANDLER_STUB(7)
INTERRUPT_HANDLER_STUB(8)
INTERRUPT_HANDLER_STUB(9)
INTERRUPT_HANDLER_STUB(10)
INTERRUPT_HANDLER_STUB(11)
INTERRUPT_HANDLER_STUB(12)
INTERRUPT_HANDLER_STUB(13)
INTERRUPT_HANDLER_STUB(14)
INTERRUPT_HANDLER_STUB(15)
INTERRUPT_HANDLER_STUB(16)
INTERRUPT_HANDLER_STUB(17)
INTERRUPT_HANDLER_STUB(18)
INTERRUPT_HANDLER_STUB(19)
INTERRUPT_HANDLER_STUB(20)
INTERRUPT_HANDLER_STUB(21)
INTERRUPT_HANDLER_STUB(22)
INTERRUPT_HANDLER_STUB(23)
INTERRUPT_HANDLER_STUB(24)
INTERRUPT_HANDLER_STUB(25)
INTERRUPT_HANDLER_STUB(26)
INTERRUPT_HANDLER_STUB(27)
INTERRUPT_HANDLER_STUB(28)
INTERRUPT_HANDLER_STUB(29)
INTERRUPT_HANDLER_STUB(30)
INTERRUPT_HANDLER_STUB(31)
INTERRUPT_HANDLER_STUB(32)
INTERRUPT_HANDLER_STUB(33)
INTERRUPT_HANDLER_STUB(34)
INTERRUPT_HANDLER_STUB(35)
INTERRUPT_HANDLER_STUB(36)
INTERRUPT_HANDLER_STUB(37)
INTERRUPT_HANDLER_STUB(38)
INTERRUPT_HANDLER_STUB(39)
INTERRUPT_HANDLER_STUB(40)
INTERRUPT_HANDLER_STUB(41)
INTERRUPT_HANDLER_STUB(42)
INTERRUPT_HANDLER_STUB(43)
INTERRUPT_HANDLER_STUB(44)
INTERRUPT_HANDLER_STUB(45)
INTERRUPT_HANDLER_STUB(46)
INTERRUPT_HANDLER_STUB(47)
INTERRUPT_HANDLER_STUB(48)
INTERRUPT_HANDLER_STUB(49)
INTERRUPT_HANDLER_STUB(50)
INTERRUPT_HANDLER_STUB(51)
INTERRUPT_HANDLER_STUB(52)
INTERRUPT_HANDLER_STUB(53)
INTERRUPT_HANDLER_STUB(54)
INTERRUPT_HANDLER_STUB(55)
INTERRUPT_HANDLER_STUB(56)
INTERRUPT_HANDLER_STUB(57)
INTERRUPT_HANDLER_STUB(58)
INTERRUPT_HANDLER_STUB(59)
INTERRUPT_HANDLER_STUB(60)
INTERRUPT_HANDLER_STUB(61)
INTERRUPT_HANDLER_STUB(62)
INTERRUPT_HANDLER_STUB(63)
INTERRUPT_HANDLER_STUB(64)
INTERRUPT_HANDLER_STUB(65)
INTERRUPT_HANDLER_STUB(66)
INTERRUPT_HANDLER_STUB(67)
INTERRUPT_HANDLER_STUB(68)
INTERRUPT_HANDLER_STUB(69)
INTERRUPT_HANDLER_STUB(70)
INTERRUPT_HANDLER_STUB(71)
INTERRUPT_HANDLER_STUB(72)
INTERRUPT_HANDLER_STUB(73)
INTERRUPT_HANDLER_STUB(74)
INTERRUPT_HANDLER_STUB(75)
INTERRUPT_HANDLER_STUB(76)
INTERRUPT_HANDLER_STUB(77)
INTERRUPT_HANDLER_STUB(78)
INTERRUPT_HANDLER_STUB(79)
INTERRUPT_HANDLER_STUB(80)
INTERRUPT_HANDLER_STUB(81)
INTERRUPT_HANDLER_STUB(82)
INTERRUPT_HANDLER_STUB(83)
INTERRUPT_HANDLER_STUB(84)
INTERRUPT_HANDLER_STUB(85)
INTERRUPT_HANDLER_STUB(86)
INTERRUPT_HANDLER_STUB(87)
INTERRUPT_HANDLER_STUB(88)
INTERRUPT_HANDLER_STUB(89)
INTERRUPT_HANDLER_STUB(90)
INTERRUPT_HANDLER_STUB(91)
INTERRUPT_HANDLER_STUB(92)
INTERRUPT_HANDLER_STUB(93)
INTERRUPT_HANDLER_STUB(94)
INTERRUPT_HANDLER_STUB(95)
INTERRUPT_HANDLER_STUB(96)
INTERRUPT_HANDLER_STUB(97)
INTERRUPT_HANDLER_STUB(98)
INTERRUPT_HANDLER_STUB(99)
INTERRUPT_HANDLER_STUB(100)
INTERRUPT_HANDLER_STUB(101)
INTERRUPT_HANDLER_STUB(102)
INTERRUPT_HANDLER_STUB(103)
INTERRUPT_HANDLER_STUB(104)
INTERRUPT_HANDLER_STUB(105)
INTERRUPT_HANDLER_STUB(106)
INTERRUPT_HANDLER_STUB(107)
INTERRUPT_HANDLER_STUB(108)
INTERRUPT_HANDLER_STUB(109)
INTERRUPT_HANDLER_STUB(110)
INTERRUPT_HANDLER_STUB(111)
INTERRUPT_HANDLER_STUB(112)
INTERRUPT_HANDLER_STUB(113)
INTERRUPT_HANDLER_STUB(114)
INTERRUPT_HANDLER_STUB(115)
INTERRUPT_HANDLER_STUB(116)
INTERRUPT_HANDLER_STUB(117)
INTERRUPT_HANDLER_STUB(118)
INTERRUPT_HANDLER_STUB(119)
INTERRUPT_HANDLER_STUB(120)
INTERRUPT_HANDLER_STUB(121)
INTERRUPT_HANDLER_STUB(122)
INTERRUPT_HANDLER_STUB(123)
INTERRUPT_HANDLER_STUB(124)
INTERRUPT_HANDLER_STUB(125)
INTERRUPT_HANDLER_STUB(126)
INTERRUPT_HANDLER_STUB(127)
INTERRUPT_HANDLER_STUB(128)
INTERRUPT_HANDLER_STUB(129)
INTERRUPT_HANDLER_STUB(130)
INTERRUPT_HANDLER_STUB(131)
INTERRUPT_HANDLER_STUB(132)
INTERRUPT_HANDLER_STUB(133)
INTERRUPT_HANDLER_STUB(134)
INTERRUPT_HANDLER_STUB(135)
INTERRUPT_HANDLER_STUB(136)
INTERRUPT_HANDLER_STUB(137)
INTERRUPT_HANDLER_STUB(138)
INTERRUPT_HANDLER_STUB(139)
INTERRUPT_HANDLER_STUB(140)
INTERRUPT_HANDLER_STUB(141)
INTERRUPT_HANDLER_STUB(142)
INTERRUPT_HANDLER_STUB(143)
INTERRUPT_HANDLER_STUB(144)
INTERRUPT_HANDLER_STUB(145)
INTERRUPT_HANDLER_STUB(146)
INTERRUPT_HANDLER_STUB(147)
INTERRUPT_HANDLER_STUB(148)
INTERRUPT_HANDLER_STUB(149)
INTERRUPT_HANDLER_STUB(150)
INTERRUPT_HANDLER_STUB(151)
INTERRUPT_HANDLER_STUB(152)
INTERRUPT_HANDLER_STUB(153)
INTERRUPT_HANDLER_STUB(154)
INTERRUPT_HANDLER_STUB(155)
INTERRUPT_HANDLER_STUB(156)
INTERRUPT_HANDLER_STUB(157)
INTERRUPT_HANDLER_STUB(158)
INTERRUPT_HANDLER_STUB(159)
INTERRUPT_HANDLER_STUB(160)
INTERRUPT_HANDLER_STUB(161)
INTERRUPT_HANDLER_STUB(162)
INTERRUPT_HANDLER_STUB(163)
INTERRUPT_HANDLER_STUB(164)
INTERRUPT_HANDLER_STUB(165)
INTERRUPT_HANDLER_STUB(166)
INTERRUPT_HANDLER_STUB(167)
INTERRUPT_HANDLER_STUB(168)
INTERRUPT_HANDLER_STUB(169)
INTERRUPT_HANDLER_STUB(170)
INTERRUPT_HANDLER_STUB(171)
INTERRUPT_HANDLER_STUB(172)
INTERRUPT_HANDLER_STUB(173)
INTERRUPT_HANDLER_STUB(174)
INTERRUPT_HANDLER_STUB(175)
INTERRUPT_HANDLER_STUB(176)
INTERRUPT_HANDLER_STUB(177)
INTERRUPT_HANDLER_STUB(178)
INTERRUPT_HANDLER_STUB(179)
INTERRUPT_HANDLER_STUB(180)
INTERRUPT_HANDLER_STUB(181)
INTERRUPT_HANDLER_STUB(182)
INTERRUPT_HANDLER_STUB(183)
INTERRUPT_HANDLER_STUB(184)
INTERRUPT_HANDLER_STUB(185)
INTERRUPT_HANDLER_STUB(186)
INTERRUPT_HANDLER_STUB(187)
INTERRUPT_HANDLER_STUB(188)
INTERRUPT_HANDLER_STUB(189)
INTERRUPT_HANDLER_STUB(190)
INTERRUPT_HANDLER_STUB(191)
INTERRUPT_HANDLER_STUB(192)
INTERRUPT_HANDLER_STUB(193)
INTERRUPT_HANDLER_STUB(194)
INTERRUPT_HANDLER_STUB(195)
INTERRUPT_HANDLER_STUB(196)
INTERRUPT_HANDLER_STUB(197)
INTERRUPT_HANDLER_STUB(198)
INTERRUPT_HANDLER_STUB(199)
INTERRUPT_HANDLER_STUB(200)
INTERRUPT_HANDLER_STUB(201)
INTERRUPT_HANDLER_STUB(202)
INTERRUPT_HANDLER_STUB(203)
INTERRUPT_HANDLER_STUB(204)
INTERRUPT_HANDLER_STUB(205)
INTERRUPT_HANDLER_STUB(206)
INTERRUPT_HANDLER_STUB(207)
INTERRUPT_HANDLER_STUB(208)
INTERRUPT_HANDLER_STUB(209)
INTERRUPT_HANDLER_STUB(210)
INTERRUPT_HANDLER_STUB(211)
INTERRUPT_HANDLER_STUB(212)
INTERRUPT_HANDLER_STUB(213)
INTERRUPT_HANDLER_STUB(214)
INTERRUPT_HANDLER_STUB(215)
INTERRUPT_HANDLER_STUB(216)
INTERRUPT_HANDLER_STUB(217)
INTERRUPT_HANDLER_STUB(218)
INTERRUPT_HANDLER_STUB(219)
INTERRUPT_HANDLER_STUB(220)
INTERRUPT_HANDLER_STUB(221)
INTERRUPT_HANDLER_STUB(222)
INTERRUPT_HANDLER_STUB(223)
INTERRUPT_HANDLER_STUB(224)
INTERRUPT_HANDLER_STUB(225)
INTERRUPT_HANDLER_STUB(226)
INTERRUPT_HANDLER_STUB(227)
INTERRUPT_HANDLER_STUB(228)
INTERRUPT_HANDLER_STUB(229)
INTERRUPT_HANDLER_STUB(230)
INTERRUPT_HANDLER_STUB(231)
INTERRUPT_HANDLER_STUB(232)
INTERRUPT_HANDLER_STUB(233)
INTERRUPT_HANDLER_STUB(234)
INTERRUPT_HANDLER_STUB(235)
INTERRUPT_HANDLER_STUB(236)
INTERRUPT_HANDLER_STUB(237)
INTERRUPT_HANDLER_STUB(238)
INTERRUPT_HANDLER_STUB(239)
INTERRUPT_HANDLER_STUB(240)
INTERRUPT_HANDLER_STUB(241)
INTERRUPT_HANDLER_STUB(242)
INTERRUPT_HANDLER_STUB(243)
INTERRUPT_HANDLER_STUB(244)
INTERRUPT_HANDLER_STUB(245)
INTERRUPT_HANDLER_STUB(246)
INTERRUPT_HANDLER_STUB(247)
INTERRUPT_HANDLER_STUB(248)
INTERRUPT_HANDLER_STUB(249)
INTERRUPT_HANDLER_STUB(250)
INTERRUPT_HANDLER_STUB(251)
INTERRUPT_HANDLER_STUB(252)
INTERRUPT_HANDLER_STUB(253)
INTERRUPT_HANDLER_STUB(254)
INTERRUPT_HANDLER_STUB(255)

#define INIT_IDT_ENTRY(i) \
    idtEntries[i] = \
      IDTEntry(InterruptType::INTERRUPT_GATE_32, PrivillegeLevel::RING0, 0x08, reinterpret_cast<void*>(&asm_interrupt_handler_##i));

int initIDT(IDTEntry idtEntries[256])
{
  INIT_IDT_ENTRY(0)
  INIT_IDT_ENTRY(1)
  INIT_IDT_ENTRY(2)
  INIT_IDT_ENTRY(3)
  INIT_IDT_ENTRY(4)
  INIT_IDT_ENTRY(5)
  INIT_IDT_ENTRY(6)
  INIT_IDT_ENTRY(7)
  INIT_IDT_ENTRY(8)
  INIT_IDT_ENTRY(9)
  INIT_IDT_ENTRY(10)
  INIT_IDT_ENTRY(11)
  INIT_IDT_ENTRY(12)
  INIT_IDT_ENTRY(13)
  INIT_IDT_ENTRY(14)
  INIT_IDT_ENTRY(15)
  INIT_IDT_ENTRY(16)
  INIT_IDT_ENTRY(17)
  INIT_IDT_ENTRY(18)
  INIT_IDT_ENTRY(19)
  INIT_IDT_ENTRY(20)
  INIT_IDT_ENTRY(21)
  INIT_IDT_ENTRY(22)
  INIT_IDT_ENTRY(23)
  INIT_IDT_ENTRY(24)
  INIT_IDT_ENTRY(25)
  INIT_IDT_ENTRY(26)
  INIT_IDT_ENTRY(27)
  INIT_IDT_ENTRY(28)
  INIT_IDT_ENTRY(29)
  INIT_IDT_ENTRY(30)
  INIT_IDT_ENTRY(31)
  INIT_IDT_ENTRY(32)
  INIT_IDT_ENTRY(33)
  INIT_IDT_ENTRY(34)
  INIT_IDT_ENTRY(35)
  INIT_IDT_ENTRY(36)
  INIT_IDT_ENTRY(37)
  INIT_IDT_ENTRY(38)
  INIT_IDT_ENTRY(39)
  INIT_IDT_ENTRY(40)
  INIT_IDT_ENTRY(41)
  INIT_IDT_ENTRY(42)
  INIT_IDT_ENTRY(43)
  INIT_IDT_ENTRY(44)
  INIT_IDT_ENTRY(45)
  INIT_IDT_ENTRY(46)
  INIT_IDT_ENTRY(47)
  INIT_IDT_ENTRY(48)
  INIT_IDT_ENTRY(49)
  INIT_IDT_ENTRY(50)
  INIT_IDT_ENTRY(51)
  INIT_IDT_ENTRY(52)
  INIT_IDT_ENTRY(53)
  INIT_IDT_ENTRY(54)
  INIT_IDT_ENTRY(55)
  INIT_IDT_ENTRY(56)
  INIT_IDT_ENTRY(57)
  INIT_IDT_ENTRY(58)
  INIT_IDT_ENTRY(59)
  INIT_IDT_ENTRY(60)
  INIT_IDT_ENTRY(61)
  INIT_IDT_ENTRY(62)
  INIT_IDT_ENTRY(63)
  INIT_IDT_ENTRY(64)
  INIT_IDT_ENTRY(65)
  INIT_IDT_ENTRY(66)
  INIT_IDT_ENTRY(67)
  INIT_IDT_ENTRY(68)
  INIT_IDT_ENTRY(69)
  INIT_IDT_ENTRY(70)
  INIT_IDT_ENTRY(71)
  INIT_IDT_ENTRY(72)
  INIT_IDT_ENTRY(73)
  INIT_IDT_ENTRY(74)
  INIT_IDT_ENTRY(75)
  INIT_IDT_ENTRY(76)
  INIT_IDT_ENTRY(77)
  INIT_IDT_ENTRY(78)
  INIT_IDT_ENTRY(79)
  INIT_IDT_ENTRY(80)
  INIT_IDT_ENTRY(81)
  INIT_IDT_ENTRY(82)
  INIT_IDT_ENTRY(83)
  INIT_IDT_ENTRY(84)
  INIT_IDT_ENTRY(85)
  INIT_IDT_ENTRY(86)
  INIT_IDT_ENTRY(87)
  INIT_IDT_ENTRY(88)
  INIT_IDT_ENTRY(89)
  INIT_IDT_ENTRY(90)
  INIT_IDT_ENTRY(91)
  INIT_IDT_ENTRY(92)
  INIT_IDT_ENTRY(93)
  INIT_IDT_ENTRY(94)
  INIT_IDT_ENTRY(95)
  INIT_IDT_ENTRY(96)
  INIT_IDT_ENTRY(97)
  INIT_IDT_ENTRY(98)
  INIT_IDT_ENTRY(99)
  INIT_IDT_ENTRY(100)
  INIT_IDT_ENTRY(101)
  INIT_IDT_ENTRY(102)
  INIT_IDT_ENTRY(103)
  INIT_IDT_ENTRY(104)
  INIT_IDT_ENTRY(105)
  INIT_IDT_ENTRY(106)
  INIT_IDT_ENTRY(107)
  INIT_IDT_ENTRY(108)
  INIT_IDT_ENTRY(109)
  INIT_IDT_ENTRY(110)
  INIT_IDT_ENTRY(111)
  INIT_IDT_ENTRY(112)
  INIT_IDT_ENTRY(113)
  INIT_IDT_ENTRY(114)
  INIT_IDT_ENTRY(115)
  INIT_IDT_ENTRY(116)
  INIT_IDT_ENTRY(117)
  INIT_IDT_ENTRY(118)
  INIT_IDT_ENTRY(119)
  INIT_IDT_ENTRY(120)
  INIT_IDT_ENTRY(121)
  INIT_IDT_ENTRY(122)
  INIT_IDT_ENTRY(123)
  INIT_IDT_ENTRY(124)
  INIT_IDT_ENTRY(125)
  INIT_IDT_ENTRY(126)
  INIT_IDT_ENTRY(127)
  INIT_IDT_ENTRY(128)
  INIT_IDT_ENTRY(129)
  INIT_IDT_ENTRY(130)
  INIT_IDT_ENTRY(131)
  INIT_IDT_ENTRY(132)
  INIT_IDT_ENTRY(133)
  INIT_IDT_ENTRY(134)
  INIT_IDT_ENTRY(135)
  INIT_IDT_ENTRY(136)
  INIT_IDT_ENTRY(137)
  INIT_IDT_ENTRY(138)
  INIT_IDT_ENTRY(139)
  INIT_IDT_ENTRY(140)
  INIT_IDT_ENTRY(141)
  INIT_IDT_ENTRY(142)
  INIT_IDT_ENTRY(143)
  INIT_IDT_ENTRY(144)
  INIT_IDT_ENTRY(145)
  INIT_IDT_ENTRY(146)
  INIT_IDT_ENTRY(147)
  INIT_IDT_ENTRY(148)
  INIT_IDT_ENTRY(149)
  INIT_IDT_ENTRY(150)
  INIT_IDT_ENTRY(151)
  INIT_IDT_ENTRY(152)
  INIT_IDT_ENTRY(153)
  INIT_IDT_ENTRY(154)
  INIT_IDT_ENTRY(155)
  INIT_IDT_ENTRY(156)
  INIT_IDT_ENTRY(157)
  INIT_IDT_ENTRY(158)
  INIT_IDT_ENTRY(159)
  INIT_IDT_ENTRY(160)
  INIT_IDT_ENTRY(161)
  INIT_IDT_ENTRY(162)
  INIT_IDT_ENTRY(163)
  INIT_IDT_ENTRY(164)
  INIT_IDT_ENTRY(165)
  INIT_IDT_ENTRY(166)
  INIT_IDT_ENTRY(167)
  INIT_IDT_ENTRY(168)
  INIT_IDT_ENTRY(169)
  INIT_IDT_ENTRY(170)
  INIT_IDT_ENTRY(171)
  INIT_IDT_ENTRY(172)
  INIT_IDT_ENTRY(173)
  INIT_IDT_ENTRY(174)
  INIT_IDT_ENTRY(175)
  INIT_IDT_ENTRY(176)
  INIT_IDT_ENTRY(177)
  INIT_IDT_ENTRY(178)
  INIT_IDT_ENTRY(179)
  INIT_IDT_ENTRY(180)
  INIT_IDT_ENTRY(181)
  INIT_IDT_ENTRY(182)
  INIT_IDT_ENTRY(183)
  INIT_IDT_ENTRY(184)
  INIT_IDT_ENTRY(185)
  INIT_IDT_ENTRY(186)
  INIT_IDT_ENTRY(187)
  INIT_IDT_ENTRY(188)
  INIT_IDT_ENTRY(189)
  INIT_IDT_ENTRY(190)
  INIT_IDT_ENTRY(191)
  INIT_IDT_ENTRY(192)
  INIT_IDT_ENTRY(193)
  INIT_IDT_ENTRY(194)
  INIT_IDT_ENTRY(195)
  INIT_IDT_ENTRY(196)
  INIT_IDT_ENTRY(197)
  INIT_IDT_ENTRY(198)
  INIT_IDT_ENTRY(199)
  INIT_IDT_ENTRY(200)
  INIT_IDT_ENTRY(201)
  INIT_IDT_ENTRY(202)
  INIT_IDT_ENTRY(203)
  INIT_IDT_ENTRY(204)
  INIT_IDT_ENTRY(205)
  INIT_IDT_ENTRY(206)
  INIT_IDT_ENTRY(207)
  INIT_IDT_ENTRY(208)
  INIT_IDT_ENTRY(209)
  INIT_IDT_ENTRY(210)
  INIT_IDT_ENTRY(211)
  INIT_IDT_ENTRY(212)
  INIT_IDT_ENTRY(213)
  INIT_IDT_ENTRY(214)
  INIT_IDT_ENTRY(215)
  INIT_IDT_ENTRY(216)
  INIT_IDT_ENTRY(217)
  INIT_IDT_ENTRY(218)
  INIT_IDT_ENTRY(219)
  INIT_IDT_ENTRY(220)
  INIT_IDT_ENTRY(221)
  INIT_IDT_ENTRY(222)
  INIT_IDT_ENTRY(223)
  INIT_IDT_ENTRY(224)
  INIT_IDT_ENTRY(225)
  INIT_IDT_ENTRY(226)
  INIT_IDT_ENTRY(227)
  INIT_IDT_ENTRY(228)
  INIT_IDT_ENTRY(229)
  INIT_IDT_ENTRY(230)
  INIT_IDT_ENTRY(231)
  INIT_IDT_ENTRY(232)
  INIT_IDT_ENTRY(233)
  INIT_IDT_ENTRY(234)
  INIT_IDT_ENTRY(235)
  INIT_IDT_ENTRY(236)
  INIT_IDT_ENTRY(237)
  INIT_IDT_ENTRY(238)
  INIT_IDT_ENTRY(239)
  INIT_IDT_ENTRY(240)
  INIT_IDT_ENTRY(241)
  INIT_IDT_ENTRY(242)
  INIT_IDT_ENTRY(243)
  INIT_IDT_ENTRY(244)
  INIT_IDT_ENTRY(245)
  INIT_IDT_ENTRY(246)
  INIT_IDT_ENTRY(247)
  INIT_IDT_ENTRY(248)
  INIT_IDT_ENTRY(249)
  INIT_IDT_ENTRY(250)
  INIT_IDT_ENTRY(251)
  INIT_IDT_ENTRY(252)
  INIT_IDT_ENTRY(253)
  INIT_IDT_ENTRY(254)
  INIT_IDT_ENTRY(255)

  return 0;
}
